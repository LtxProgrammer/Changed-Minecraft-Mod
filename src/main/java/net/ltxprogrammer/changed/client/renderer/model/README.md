# 3D Models
Our models are created in Blockbench, and exported into a java file put here. A caution to those working here, adding your own entity is not a simple process.

# Where do I start?
Have [Blockbench](https://www.blockbench.net/) and [Intellij](https://www.jetbrains.com/idea/) installed, and open the 
[base wolf model](https://cdn.discordapp.com/attachments/1018163101461393418/1034560501578989579/Base.bbmodel).
Save the project named as whatever you are creating. All of the parts in the model need to be grouped with their related parts.

- Head
- Torso
- - Tail
- RightArm
- LeftArm
- RightLeg
- LeftLeg

# What's next?
Once you're done modeling and texturing your new entity, export the project into a Java file. This Java file isn't ready to be submitted yet though. 
After exporting, copy and rename a similar model (ex: LightLatexWolfMaleModel.java).

In this file, replace `"light_latex_wolf_male"` with the name of your model.
```java
public static final ModelLayerLocation LAYER_LOCATION = new ModelLayerLocation(Changed.modResource("light_latex_wolf_male"), "main");
```

Replace the `createBodyLayer()` function with the one generated by Blockbench.
```java
public static LayerDefinition createBodyLayer() {
  MeshDefinition meshdefinition = new MeshDefinition();
	PartDefinition partdefinition = meshdefinition.getRoot();

	PartDefinition RightLeg = partdefinition.addOrReplaceChild("RightLeg", CubeListBuilder.create().texOffs(48, 11).addBox(-2.0F, 12.0F, -2.75F, 4.0F, 2.0F, 4.0F, CubeDeformation.NONE), PartPose.offset(-2.5F, 10.0F, 0.0F));

  ...
  
	PartDefinition LeftArm = partdefinition.addOrReplaceChild("LeftArm", CubeListBuilder.create().texOffs(0, 32).addBox(4.0F, -26.0F, -2.0F, 4.0F, 12.0F, 4.0F, CubeDeformation.NONE)
	.texOffs(43, 14).addBox(4.0F, -14.25F, -2.0F, 1.0F, 1.0F, 1.0F, CubeDeformation.NONE)
	.texOffs(43, 12).addBox(7.0F, -14.25F, 1.0F, 1.0F, 1.0F, 1.0F, CubeDeformation.NONE)
	.texOffs(40, 23).addBox(7.0F, -14.25F, -0.5F, 1.0F, 1.0F, 1.0F, CubeDeformation.NONE)
	.texOffs(40, 21).addBox(7.0F, -14.25F, -2.0F, 1.0F, 1.0F, 1.0F, CubeDeformation.NONE), PartPose.offset(0.0F, 25.0F, 0.0F));

	return LayerDefinition.create(meshdefinition, 128, 128);
}
```
Then replace `meshdefinition` in the return line with `process(meshdefinition)`

## New entity
Of course, you can't register a model for an entity that doesn't exist yet!
In *src/main/java/net/ltxprogrammer/changed/entity/beast* create a new Java class for your entity.
Make sure this entity class extends `LatexEntity` or a specific already existing latex entity.
When you're done, don't forget to register it in `ChangedEntities` with an appropriate name, egg foreground and background color, and spawning rules.

Back to your model file, replace instances of the old entity class in the class with your new entity class.

from:
```java
public class MyNewEntityModel extends LatexHumanoidModel<LightLatexWolfMale> implements LatexHumanoidModelInterface
```
to:
```java
public class MyNewEntityModel extends LatexHumanoidModel<MyNewEntity> implements LatexHumanoidModelInterface
```

## Entity renderer
Now you'll need a renderer for your entity. In *src/main/java/net/ltxprogrammer/changed/client/renderer*, copy yourself a new renderer class.
In this new renderer class, replace instances of the old entity class in the class with your new entity class.

from:
```java
public class AerosolLatexWolfRenderer extends LatexHumanoidRenderer<AerosolLatexWolf, AerosolLatexWolfModel, ArmorLatexWolfModel<AerosolLatexWolf>> {
    public AerosolLatexWolfRenderer(EntityRendererProvider.Context context) {
        super(context, new AerosolLatexWolfModel(context.bakeLayer( AerosolLatexWolfModel.LAYER_LOCATION)),
                ArmorLatexWolfModel::new, ArmorLatexWolfModel.INNER_ARMOR, ArmorLatexWolfModel.OUTER_ARMOR, 0.5f);
    }

    @Override
    public ResourceLocation getTextureLocation(AerosolLatexWolf p_114482_) {
        return Changed.modResource("textures/aerosol_latex_wolf.png");
    }
}
```
to:
```java
public class MyNewEntityRenderer extends LatexHumanoidRenderer<MyNewEntity, MyNewEntityModel, ArmorLatexWolfModel<AerosolLatexWolf>> {
    public MyNewEntityRenderer(EntityRendererProvider.Context context) {
        super(context, new MyNewEntityModel(context.bakeLayer( MyNewEntityModel.LAYER_LOCATION)),
                ArmorLatexWolfModel::new, ArmorLatexWolfModel.INNER_ARMOR, ArmorLatexWolfModel.OUTER_ARMOR, 0.5f);
    }

    @Override
    public ResourceLocation getTextureLocation(MyNewEntity p_114482_) {
        return Changed.modResource("textures/my_new_entity.png");
    }
}
```
Note: if your entity has a significantly different model than an already existing model, you'll have to create a new Armor model.

## Registering the model and renderer
In `ChangedEntityRenderers`, add your new entity to the existing list of renderers.
```java
event.registerEntityRenderer(ChangedEntities.MY_NEW_ENTITY.get(), MyNewEntityRenderer::new);
```
In `ChangedLayerDefinitions`, register your model (and armor model if a new one is made).
```java
ForgeHooksClient.registerLayerDefinition(MyNewEntityModel.LAYER_LOCATION, MyNewEntityModel::createBodyLayer);
```

Once this is set properly, the entity is almost ready for the mod. Add a new language entry to *src/main/resources/assets/changed/lang* for the
entity's name. Finally in *src/main/resources/assets/changed/models/item*, copy any spawn egg json file and rename it to `"my_new_entity_spawn_egg.json"`.

After all of this, your entity is now fully implemented into the mod!

## We're not done here.
If you are meant to be able to transfur into this entity, add a new entry for your entity in *src/main/java/net/ltxprogrammer/changed/entity/variant/LatexVariant.java*.
```java
public static final LatexVariant<MyNewEntity> MY_NEW_ENTITY = register(Builder.of(ChangedEntities.MY_NEW_ENTITY)
  .groundSpeed(1.075f).swimSpeed(0.85f).stepSize(0.7f) // Stat adjustments
  .build(Changed.modResource("form_my_new_entity")));

// You can also register by copying an already existing variant (Note: LIGHT_LATEX_WOLF is a gendered entity, you can only copy by specifying male or female
public static final LatexVariant<MyNewEntity> MY_NEW_ENTITY = register(Builder.of(LIGHT_LATEX_WOLF.male(), ChangedEntities.MY_NEW_ENTITY)
  .groundSpeed(1.075f).swimSpeed(0.85f).stepSize(0.7f) // Stat adjustments
  .build(Changed.modResource("form_my_new_entity")));
```

### Transfur recipe
In *src/main/resources/data/changed/recipes*, create a recipe for your new entity.
In *src/main/resources/data/changed/advancements/recipes/changed_forms*, you can grant the player the recipe for your form from a game event.
Most recipes are granted when the player has a `latex_base` in their inventory.

### Are we done yet?
There's a lot to adding your own model to the game, but this is the end of everything that needs to be added to get your model ingame.
Make sure your entity looks good ingame before creating a PR.
